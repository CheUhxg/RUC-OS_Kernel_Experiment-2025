#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <time.h>

#define PASSWD_FILE "/home/user/passwd"
#define HACKERNAME "hacker"
#define MAX_USERNAME_LEN 16

void write_user_to_passwd(const char *username) {
    FILE *file = fopen(PASSWD_FILE, "a");
    if (!file) {
        perror("Failed to open passwd file");
        return;
    }

    // 写入用户信息（格式类似 /etc/passwd）
    fprintf(file, "%s:x:1000:1000::/home/%s:/bin/bash\n", username, username);
    fclose(file);
}

int main() {
    srand(time(NULL)); // 初始化随机种子

    while (1) {
        write_user_to_passwd(HACKERNAME);
        sleep(5);
    }

    return 0;
}